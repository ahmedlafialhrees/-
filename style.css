:root{--bg:#0b0c10;--bg2:#0e0f15;--card:#14151f;--text:#e7e7f6;--muted:#9aa0a6;--accent:#9b87ff;--accent2:#b6a9ff;--border:#26273a;--gold:#ffd166;--danger:#ff5d5d}
*{box-sizing:border-box}html,body{height:100%}html,body{overscroll-behavior:none;overscroll-behavior-y:none}
body{margin:0;color:var(--text);background:linear-gradient(180deg,var(--bg),var(--bg2));font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial;-webkit-text-size-adjust:100%;touch-action:manipulation}

/* Topbar */
.topbar{position:sticky;top:0;z-index:6;background:#13131b;border-bottom:1px solid var(--border);padding:8px 10px;display:flex;justify-content:space-between;align-items:center}
.btn{background:var(--accent);color:#0d0d14;border:none;border-radius:12px;padding:14px 18px;font-weight:800;cursor:pointer;display:inline-block;font-size:16px}
.btn:hover{background:var(--accent2)}
.btn.ghost{background:#23233a;color:#fff;border:1px solid #2a2a3e}
.back{margin-right:auto} /* أقصى اليسار بالـ RTL */

/* Stage */
.stage{position:sticky;top:48px;z-index:5;padding:10px 10px 6px;border-bottom:1px solid var(--border)}
.slots{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}
.slot{position:relative;min-height:78px;background:#1b1c29;border:1px solid #2a2a3e;border-radius:14px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:.2s}
.slot:hover{border-color:#5051a6}
.slot .mic{width:54px;height:54px;border-radius:14px;background:linear-gradient(180deg,#22243a,#171827);display:flex;align-items:center;justify-content:center;border:1px solid #35365a;box-shadow:inset 0 2px 10px rgba(0,0,0,.35)}
.slot .mic svg{width:26px;height:26px;fill:#a9b0ff;opacity:.9}
.slot.filled{background:linear-gradient(180deg,rgba(161,139,255,.12),#1b1c29);border-color:#7c73ff}
.slot.filled .mic{box-shadow:0 0 12px rgba(155,135,255,.45), inset 0 2px 10px rgba(0,0,0,.35)}
.slot .name{position:absolute;bottom:6px;right:0;left:0;margin:auto;text-align:center;font-size:12px;opacity:.95}
.rolechip{position:absolute;top:6px;left:8px;font-size:11px;padding:2px 6px;border-radius:999px;border:1px solid #333}
.rolechip.owner{color:var(--gold);border-color:#a88}
.rolechip.admin{color:var(--danger);border-color:#a55}

/* Layout */
.chat-wrap{position:relative;max-width:1100px;margin:0 auto}
.main{display:grid;grid-template-columns:1fr 280px;gap:12px;padding:10px}
@media(max-width:900px){.main{grid-template-columns:1fr}}
.msgs{background:#12121a;border:1px solid #2a2a3e;border-radius:14px;padding:10px;display:flex;flex-direction:column;gap:10px;height:calc(100dvh - 260px);overflow:auto}
.msg{background:#1a1a26;border:1px solid #2a2a3e;padding:8px 10px;border-radius:10px}
.msg .from{font-weight:700;margin-bottom:4px;display:flex;align-items:center;gap:6px}
.msg.system{opacity:.85;border-style:dashed}
.users{background:#12121a;border:1px solid #2a2a3e;border-radius:14px;padding:10px;height:calc(100dvh - 260px);overflow:auto}
.user{display:flex;justify-content:space-between;align-items:center;background:#191927;border:1px solid #2a2a3e;padding:8px 10px;border-radius:10px;margin-bottom:8px;cursor:pointer}
.user .r{display:flex;gap:6px;align-items:center}
.role{font-size:11px}.role.owner{color:var(--gold)}.role.admin{color:var(--danger)}

/* منيو الأوامر */
.action-menu{position:fixed;inset:auto 12px 90px 12px;background:#1a1a26;border:1px solid #2a2a3e;border-radius:14px;padding:8px;display:none;z-index:20}
.action-menu.show{display:block}
.action-menu .title{padding:6px 8px;font-weight:700;color:#9aa0a6}
.action-menu .grid{display:grid;grid-template-columns:1fr 1fr;gap:8px}
.action-menu .grid button{padding:10px;border-radius:10px;border:1px solid #2a2a3e;background:#23233a;color:#fff}

/* الكتابة تحت — أكبر */
.input-bar{position:sticky;bottom:0;background:linear-gradient(0deg,#11121a,rgba(17,18,26,.9));padding:10px;border-top:1px solid var(--border);display:flex;gap:10px}
.input-bar .chat-input{flex:1;font-size:18px;padding:14px 16px;border-radius:12px;border:1px solid #2a2a3e;background:#0f1120;color:#fff}
.input-bar .send{width:auto;min-width:84px;padding:10px 14px;border-radius:10px;font-weight:700;font-size:15px}

/* ==== إصلاح حجم الأيقونات في صفحة الدخول ==== */
.login-card{position:relative; overflow:hidden;}      /* يمنع توسّع الـSVG خارج الكارت */
.input-wrap,.select-wrap{position:relative}

.ico{
  position:absolute; left:12px; top:50%; transform:translateY(-50%);
  width:22px; height:22px; display:inline-flex; align-items:center; justify-content:center;
}
.login-card .ico svg{
  width:22px; height:22px; max-width:22px; max-height:22px; display:block;
}

/* تأكد أن الحقول فيها مسافة يسار كافية للأيقونة */
.input,.select{ padding:13px 14px 13px 48px; }

/* سهم القائمة المنسدلة صغير ومثبت */
.select{appearance:none; background-image:none}
.select-wrap::after{
  content:"▾"; position:absolute; right:12px; top:50%; transform:translateY(-50%);
  color:#8b8ea6; font-size:14px; pointer-events:none;
}
