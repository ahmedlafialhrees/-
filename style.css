/* =========================
   الأساسيات والمتغيرات
   ========================= */
:root{
  --bg:#0b0c10; --bg2:#0e0f15;
  --card:#14151f; --card2:#12121a;
  --text:#e7e7f6; --muted:#9aa0a6;
  --accent:#9b87ff; --accent2:#b6a9ff;
  --border:#26273a;
  --gold:#ffd166; --danger:#ff5d5d;
}

*{box-sizing:border-box}
html,body{height:100%}
html,body{overscroll-behavior:none; overscroll-behavior-y:none}
body{
  margin:0; color:var(--text);
  background:linear-gradient(180deg,var(--bg),var(--bg2));
  font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial;
  -webkit-text-size-adjust:100%;
  touch-action:manipulation;
}

/* أدوات صغيرة مفيدة */
.container{max-width:1100px;margin:0 auto;padding:10px}
.row{display:flex;gap:10px;align-items:center}
.col{display:flex;flex-direction:column;gap:10px}
.card{background:var(--card2);border:1px solid var(--border);border-radius:14px}
.badge{
  display:inline-flex;align-items:center;gap:8px;
  padding:6px 10px;border-radius:999px;border:1px solid #2a2a3e;
  background:#191a24;color:#d7d7ee;font-weight:700;font-size:12px;
}

/* =========================
   الأزرار
   ========================= */
.btn{
  background:var(--accent); color:#0d0d14; border:none;
  border-radius:12px; padding:14px 18px; font-weight:800;
  cursor:pointer; display:inline-flex; align-items:center; justify-content:center;
  font-size:16px; text-decoration:none;
}
.btn:hover{background:var(--accent2)}
.btn.ghost{background:#23233a;color:#fff;border:1px solid #2a2a3e}
.btn.small{padding:8px 12px;font-size:13px;border-radius:10px}

/* =========================
   صفحة الدخول
   ========================= */
body.login-page{display:flex;min-height:100dvh;align-items:center;justify-content:center;padding:24px}
.login-card{
  width:min(520px,94vw);
  background:linear-gradient(180deg,var(--card),rgba(20,21,31,.96));
  border:1px solid var(--border); border-radius:18px;
  padding:22px 18px; box-shadow:0 20px 50px rgba(0,0,0,.35);
  position:relative; overflow:hidden;
}
.login-title{margin:6px 0 16px;text-align:center;font-size:26px;font-weight:800;color:var(--text)}
.login-fields{display:flex;flex-direction:column;gap:12px}

.input-wrap,.select-wrap{position:relative}
.ico{
  position:absolute; left:12px; top:50%; transform:translateY(-50%);
  width:22px; height:22px; display:inline-flex; align-items:center; justify-content:center;
}
.login-card .ico svg{width:22px;height:22px;max-width:22px;max-height:22px;display:block}

.input,.select{
  width:100%; background:#0f1120; color:var(--text);
  border:1px solid var(--border); border-radius:12px;
  padding:13px 14px 13px 48px; outline:none; -webkit-appearance:none;
  font-size:16px; line-height:1.3;
}
.input::placeholder{color:#7f8294}
.input:focus,.select:focus{border-color:var(--accent); box-shadow:0 0 0 3px rgba(155,135,255,.18)}

.select{appearance:none; background-image:none}
.select-wrap::after{
  content:"▾"; position:absolute; right:12px; top:50%; transform:translateY(-50%);
  color:#8b8ea6; font-size:14px; pointer-events:none;
}

/* زر الدخول الكبير */
.btn.big{width:100%}

/* =========================
   شريط علوي للشات/المالك
   ========================= */
.topbar{
  position:sticky; top:0; z-index:6;
  background:#13131b; border-bottom:1px solid var(--border);
  padding:8px 10px; display:flex; justify-content:space-between; align-items:center;
}
.back{margin-right:auto} /* في RTL يدز الزر لليسار */

/* =========================
   الشات: تخطيط عام
   ========================= */
.chat-wrap{min-height:100dvh; display:flex; flex-direction:column; max-width:1100px; margin:0 auto}
.main{flex:1; min-height:0; display:grid; grid-template-columns:1fr 280px; gap:12px; padding:10px}
@media(max-width:900px){.main{grid-template-columns:1fr}}

.msgs{
  background:#12121a; border:1px solid #2a2a3e; border-radius:14px;
  padding:10px; display:flex; flex-direction:column; gap:10px;
  min-height:0; overflow:auto;
}
.msg{background:#1a1a26;border:1px solid #2a2a3e;padding:8px 10px;border-radius:10px}
.msg .from{font-weight:700;margin-bottom:4px;display:flex;align-items:center;gap:6px}
.msg.system{opacity:.85;border-style:dashed}

.users{
  background:#12121a; border:1px solid #2a2a3e; border-radius:14px;
  padding:10px; min-height:0; overflow:auto;
}
.user{display:flex;justify-content:space-between;align-items:center;background:#191927;border:1px solid #2a2a3e;padding:8px 10px;border-radius:10px;margin-bottom:8px;cursor:pointer}
.user .r{display:flex;gap:6px;align-items:center}
.role{font-size:11px}
.role.owner{color:var(--gold)}
.role.admin{color:var(--danger)}
.rolechip{font-size:11px;padding:2px 6px;border-radius:999px;border:1px solid #333}
.rolechip.owner{color:var(--gold);border-color:#a88}
.rolechip.admin{color:var(--danger);border-color:#a55}

/* =========================
   الاستيج: نافذة قابلة للإظهار/الإخفاء
   ========================= */
.stage-panel{border-bottom:1px solid var(--border)}
.stage-header{display:flex;align-items:center;justify-content:space-between;padding:8px 10px}
.stage-panel.closed .stage{display:none}
.stage{padding:6px 10px 10px}
.slots{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}
.slot{
  position:relative;min-height:78px;background:#1b1c29;border:1px solid #2a2a3e;border-radius:14px;
  display:flex;align-items:center;justify-content:center;cursor:pointer;transition:.2s
}
.slot:hover{border-color:#5051a6}
.slot .mic{
  width:54px;height:54px;border-radius:14px;background:linear-gradient(180deg,#22243a,#171827);
  display:flex;align-items:center;justify-content:center;border:1px solid #35365a;
  box-shadow:inset 0 2px 10px rgba(0,0,0,.35)
}
.slot .mic svg{width:26px;height:26px;fill:#a9b0ff;opacity:.9}
.slot.filled{background:linear-gradient(180deg,rgba(161,139,255,.12),#1b1c29);border-color:#7c73ff}
.slot.filled .mic{box-shadow:0 0 12px rgba(155,135,255,.45), inset 0 2px 10px rgba(0,0,0,.35)}
.slot .name{position:absolute;bottom:6px;right:0;left:0;margin:auto;text-align:center;font-size:12px;opacity:.95}

/* =========================
   منيو الأوامر
   ========================= */
.action-menu{
  position:fixed; inset:auto 12px calc(70px + env(safe-area-inset-bottom)) 12px;
  background:#1a1a26; border:1px solid #2a2a3e; border-radius:14px; padding:8px; display:none; z-index:20
}
.action-menu.show{display:block}
.action-menu .title{padding:6px 8px;font-weight:700;color:#9aa0a6}
.action-menu .grid{display:grid;grid-template-columns:1fr 1fr;gap:8px}
.action-menu .grid button{padding:10px;border-radius:10px;border:1px solid #2a2a3e;background:#23233a;color:#fff}

/* =========================
   شريط الإدخال أسفل
   ========================= */
.input-bar{
  position:sticky; bottom:0; z-index:10;
  background:linear-gradient(0deg,#11121a,rgba(17,18,26,.92));
  padding:10px 10px calc(10px + env(safe-area-inset-bottom));
  border-top:1px solid #2a2a3e; display:flex; gap:10px;
}
.input-bar .chat-input{
  flex:1; font-size:18px; padding:14px 16px;
  border-radius:12px; border:1px solid #2a2a3e; background:#0f1120; color:#fff;
}
.input-bar .send{width:auto; min-width:84px; padding:10px 14px; border-radius:10px; font-weight:700; font-size:15px}

/* =========================
   owner.html (قائمة الإدارة)
   ========================= */
.owner-list-row{
  display:flex;justify-content:space-between;align-items:center;
  border:1px solid #2a2a3e;border-radius:10px;padding:10px;background:#191927;
}

/* ==== تعديلات حسب طلبك ==== */

/* الرسائل بعرض كامل وإخفاء حدود */
.main{ grid-template-columns: 1fr !important; }
.users{ display:none !important; }            /* نخفي عمود الأعضاء */
.msgs{
  background:#1b1c29 !important;             /* نفس لون خانات الاستيج */
  border:0 !important;
  border-radius:14px !important;
}

/* شريط علوي وكلام فوق بدون حدود */
.topbar{ border-bottom:0 !important; }
.btn.ghost{ border-color:transparent !important; }   /* زر خروج بدون حد */
.stage-panel{ border-bottom:0 !important; }
.stage-header .badge{
  border:0 !important;
  background:transparent !important;
  padding:0 !important;
}

/* خانات الاستيج بدون حدود (لو تبغى نفس الإحساس بالضبط) */
.slot{ border:0 !important; }
