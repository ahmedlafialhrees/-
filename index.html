<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, maximum-scale=1"/>
  <meta name="format-detection" content="telephone=no"/>
  <title>الدخول</title>
  <style>
    :root{--vh:1vh; --bg:#0c0e12; --muted:#8b93a7; --radius:14px}
    *{box-sizing:border-box} html,body{height:100%;margin:0}
    body{
      min-height:calc(var(--vh) * 100);
      background:radial-gradient(1200px 600px at 50% -10%, #1c2232 0%, #0c0e12 60%), var(--bg);
      color:#e8ecf3; font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      display:grid; place-items:center; padding:16px; overscroll-behavior:contain;
    }
    .card{width:min(440px,100%);background:linear-gradient(180deg,#151a25,#0f1320);
      border:1px solid #1e2535;border-radius:var(--radius);padding:20px;box-shadow:0 10px 40px rgba(0,0,0,.35)}
    h2{margin:0 0 16px}
    label{display:block;font-size:13px;color:var(--muted);margin:8px 0 6px}
    input,select,button{width:100%;padding:14px;border-radius:12px;border:1px solid #222a3a;background:#0e1220;color:#e8ecf3;font-size:16px}
    button{border:0;background:linear-gradient(135deg,#f5c84c,#ffb300);color:#161616;font-weight:700;cursor:pointer}
    .row{margin-bottom:12px}
  </style>
</head>
<body>
  <div class="card">
    <h2>الدخول للروم</h2>
    <div class="row">
      <label for="nameInput">الاسم</label>
      <input id="nameInput" type="text" placeholder="اكتب اسمك" required/>
    </div>
    <div class="row">
      <label for="roleSelect">الدور</label>
      <select id="roleSelect">
        <option value="user">عضو</option>
        <option value="admin">أدمن</option>
        <option value="owner">أونر</option>
      </select>
    </div>
    <div class="row">
      <label for="passwordInput">كلمة السر (للأدمن/الأونر)</label>
      <input id="passwordInput" type="password" placeholder="اكتب كلمة السر إن لزم"/>
    </div>
    <button id="enterBtn" type="button">دخول الروم</button>
  </div>

  <script type="module">
    // تثبيت ارتفاع الجوال
    const setVh=()=>document.documentElement.style.setProperty('--vh', `${window.innerHeight*0.01}px`);
    setVh(); addEventListener('resize', setVh);

    import { OWNER_NAME, OWNER_PASS } from "./config.js?v=3";
    const $=id=>document.getElementById(id);
    const nameEl=$("nameInput"), roleEl=$("roleSelect"), passEl=$("passwordInput"), btn=$("enterBtn");

    btn.addEventListener("click", ()=>{
      const name=(nameEl.value||"").trim();
      const role=roleEl.value;
      const pass=(passEl.value||"").trim();
      if(!name){ alert("اكتب اسمك"); return; }

      if(name===OWNER_NAME){
        if(pass!==OWNER_PASS){ alert("كلمة سر الأونر غلط"); return; }
        localStorage.setItem("role","ownerMain");
      }else if(role==="owner"){
        if(!pass){ alert("حط كلمة سر الأونر اللي عطاك إياها"); return; }
        localStorage.setItem("role","owner");
      }else if(role==="admin"){
        if(!pass){ alert("حط كلمة سر الأدمن"); return; }
        localStorage.setItem("role","admin");
      }else{
        localStorage.setItem("role","user");
      }
      localStorage.setItem("name", name);
      localStorage.setItem("pass", pass);
      location.href="chat.html";
    });
  </script>
</body>
</html>
