<!-- داخل الفورم -->
<input id="nameInput" type="text" placeholder="اسمك" required />
<select id="roleSelect">
  <option value="user">عضو</option>
  <option value="admin">أدمن</option>
  <option value="owner">أونر</option>
</select>
<input id="passwordInput" type="password" placeholder="كلمة السر (للأدمن/الأونر)" />
<button id="enterBtn" type="button">دخول</button>

<script type="module">
  import { OWNER_NAME, OWNER_PASS } from "./config.js";

  const nameEl = document.getElementById("nameInput");
  const roleEl = document.getElementById("roleSelect");
  const passEl = document.getElementById("passwordInput");
  const btn = document.getElementById("enterBtn");

  btn.addEventListener("click", () => {
    const name = (nameEl.value || "").trim();
    const role = roleEl.value;
    const pass = (passEl.value || "").trim();

    if (!name) { alert("اكتب اسمك"); return; }

    // تحقق الأونر الرئيسي
    if (name === OWNER_NAME) {
      if (pass !== OWNER_PASS) { alert("كلمة سر الأونر غلط"); return; }
      localStorage.setItem("role", "ownerMain");
    } else if (role === "owner") {
      // يمنع أي أحد ينتحل الأونر الرئيسي باسم مختلف
      alert("الأونر الرئيسي اسمه 'احمد' فقط");
      return;
    } else if (role === "admin") {
      if (!pass) { alert("حط كلمة سر الأدمن"); return; }
      localStorage.setItem("role", "admin");
    } else {
      localStorage.setItem("role", "user");
    }

    localStorage.setItem("name", name);
    localStorage.setItem("authTs", Date.now().toString());
    window.location.href = "chat.html";
  });
</script>
